const range=(size,startAt=0)=>{return[...Array(size).keys()].map(i=>i+startAt)},pick=list=>{let[b,e]=list,size=e-b;return range(size,b)[parseInt(Math.random()*size)]};(function(){const gbk_word=[[[176,247],[161,254]],[[129,160],[64,126]],[[129,160],[128,254]],[[170,254],[64,126]],[[170,254],[128,160]]],gbk_symbol=[[[161,169],[161,254]],[[168,169],[64,126]],[[168,169],[128,160]]],length=$("#length"),with_symbol=$("#with_symbol"),gen=$("#gen"),submitBtn=$("#submit"),GenKJK=()=>{let len=length.val(),str=[],sym=with_symbol.is(":checked"),gbk_range=[...gbk_word];if(sym)gbk_range.push(...gbk_symbol);let rlen=gbk_range.length;for(let i=0;i<len;i++){let r=gbk_range[parseInt(Math.random()*rlen)];str.push(...r.map(e=>pick(e)))};gen.text(GBK.decode(str))};$(document).keypress(e=>{if(e.which===13)GenKJK()});submitBtn.click(GenKJK)})();